# Активность пользователей интернет-магазина

## Данные

Данные для работы находятся в нескольких таблицах:
- данные о поведении покупателя на сайте, о коммуникациях с покупателем и его продуктовом поведении
- данные о выручке, которую получает магазин с покупателя, то есть сколько покупатель всего потратил за период взаимодействия с сайтом
- данные о времени (в минутах), которое покупатель провёл на сайте в течение периода
- данные о среднемесячной прибыли покупателя за последние 3 месяца: какую прибыль получает магазин от продаж каждому покупателю

## Задача

Построить модель , которая позволит компании удерживать активность постоянных клиентов с помощью персонализированных предложений. Для этого требуется на основе групп признаков определить уровень финансовой активности клиентов, рассчитать прибыльность клиентов, предсказать изменение активности в следующие 3 месяца, провести сегментацию клиентов, определить ключевой сегмент и разработать рекомендации о персонализированных предложениях.

## Используемые библиотеки
*pandas, numpy, sklearn, matplotlib, seaborn, plotly.express, math, scipy, statsmodels, phik, shap*

## Используемые методы
*DummyClassifier, LinearRegression, LogisticRegression, KNeighborsClassifier, DecisionTreeClassifier, SVC, OneVsRestClassifier, RandomForestClassifier, train_test_split, Pipeline, ColumnTransformer, RandomOverSampler, SMOTE, SMOTENC, SMOTETomek, ADASYN, OneHotEncoder, OrdinalEncoder, LabelEncoder, StandardScaler, MinMaxScaler, RobustScaler, PowerTransformer, PolynomialFeatures, KFold, StratifiedKFold, normaltest, shapiro, anderson, qqplot, f_classif, mutual_info_classif, pearsonr, phik_matrix, plot_correlation_matrix, OptunaSearchCV, GridSearchCV, RandomizedSearchCV, permutation_importance*

## Метрики
*accuracy_score, precision_score, recall_score, r2_score, mean_squared_error, mean_absolute_error, confusion_matrix, cross_val_score*

## Выводы

Замечание: нет единиц измерения выручки и прибыльности клиентов. Это нужно добавить при сборе данных.

Снижение покупательской активности отмеченео у 39% пользователей, у 61% - покупательская активность на прежнем уровне. Среди клиентов он-лайн магазина 71% типа сервиса - стандарт, 29% - премиум. 74% пользователей разрешают присылать рекламную информацию, 26% - нет. Наиболее популярная категория: товары для детей - 25%, затем домашний текстиль -19%, Косметика и аксессуары - 17%, Техника для красоты и здоровья - 14%, мелкая бытовая техника и электроника - 13%, кухонная посуда - 11%.

Важные моменты из анализа данных:

покупатели с высокой долей промо-покупок склонны к снижению покупательской активности.
покупатели мелкой бытовой техники и электроники кслонны к сохранению покупательской активности.
с увеличением времени регистрации на сайте пользователи склонны переходить к типу сервиса премиум.
маркетинговая активность за 6 мес менее 3 итераций отмечается в группе со сниженной покупательской активностью.
в целом в группе с прежней активностью число маркетинговых итераций выше.
большее снижение активности в сегменте премиум с высокой долей промо-покупок.
при значении числа неоплаченных покупок за квартал от 6 и выше пользователи снизили свою покупательскую активность.
основная доля пользователей, снизивших активность просматривает до 7,5 страниц за визит; сохранивших прежний уровень активности - от 6 до 12 страниц; клиенты с наибольшей прибыльностью - до 17,5 страниц.
аналогично дело обстоит с минутами: при снижении активности пользователи проводят от 7,5 до 12,5 минут на сайте, при сохранении активности - от 10 до 22,5 минут.
При использовании RandomizedSearchCV лучшей моделью получилась LogisticRegression, с параметрами: C=1, class_weight='balanced', penalty='l1', random_state=42, solver='liblinear'. Метрика roc_auc составляет 0,903.

Анализ важности признаков показал, что наибольшую значимость представляет количество просмотренных за визит страниц, затем минуты на сайте в предыдущем месяце. Далее идут минуты на сайте в текущем месяцах, число просмотренных за визит категорий, количество неоплаченных товаров и на следующей позиции - категориальные промо-покупки и маркетинговая активность за 6 мес.

Для более подробного описания выбран сегмент покупателей мелкой бытовой техники. На основе данных модели отобраны 4 клиента, с вероятностью снижения покупательской активности от 50%. Приведены возможные рекомендации по удержанию покупателей.
